{"version":3,"sources":["../../../src/core/DragPreviewImage.ts"],"sourcesContent":["import { FC, useEffect, memo } from 'react'\nimport type { ConnectDragPreview } from '../types/index.js'\n\nexport interface DragPreviewImageProps {\n\tconnect: ConnectDragPreview\n\tsrc: string\n}\n/**\n * A utility for rendering a drag preview image\n */\nexport const DragPreviewImage: FC<DragPreviewImageProps> = memo(\n\tfunction DragPreviewImage({ connect, src }) {\n\t\tuseEffect(() => {\n\t\t\tif (typeof Image === 'undefined') return\n\n\t\t\tlet connected = false\n\t\t\tconst img = new Image()\n\t\t\timg.src = src\n\t\t\timg.onload = () => {\n\t\t\t\tconnect(img)\n\t\t\t\tconnected = true\n\t\t\t}\n\t\t\treturn () => {\n\t\t\t\tif (connected) {\n\t\t\t\t\tconnect(null)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\treturn null\n\t},\n)\n"],"names":["useEffect","memo","DragPreviewImage","connect","src","Image","connected","img","onload"],"mappings":"AAAA,MAAM,GAAOA,SAAS,EAAEC,IAAI,QAAQ,CAAO;AAO3C,EAEG,AAFH;;CAEG,AAFH,EAEG,CACH,MAAM,CAAC,KAAK,CAACC,gBAAgB,GAA8BD,IAAI,CAC9D,QAAQ,CAACC,gBAAgB,CAAC,CAAC,CAACC,OAAO,GAAEC,GAAG,EAAC,CAAC,EAAE,CAAC;IAC5CJ,SAAS,KAAO,CAAC;QAChB,EAAE,EAAE,MAAM,CAACK,KAAK,KAAK,CAAW,YAAE,MAAM;QAExC,GAAG,CAACC,SAAS,GAAG,KAAK;QACrB,KAAK,CAACC,GAAG,GAAG,GAAG,CAACF,KAAK;QACrBE,GAAG,CAACH,GAAG,GAAGA,GAAG;QACbG,GAAG,CAACC,MAAM,OAAS,CAAC;YACnBL,OAAO,CAACI,GAAG;YACXD,SAAS,GAAG,IAAI;QACjB,CAAC;QACD,MAAM,KAAO,CAAC;YACb,EAAE,EAAEA,SAAS,EAAE,CAAC;gBACfH,OAAO,CAAC,IAAI;YACb,CAAC;QACF,CAAC;IACF,CAAC;IAED,MAAM,CAAC,IAAI;AACZ,CAAC"}
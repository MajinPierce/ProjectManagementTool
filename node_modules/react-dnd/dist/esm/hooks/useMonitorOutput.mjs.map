{"version":3,"sources":["../../../src/hooks/useMonitorOutput.ts"],"sourcesContent":["import type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\nimport { useCollector } from './useCollector.js'\n\nexport function useMonitorOutput<Monitor extends HandlerManager, Collected>(\n\tmonitor: Monitor & MonitorEventEmitter,\n\tcollect: (monitor: Monitor) => Collected,\n\tonCollect?: () => void,\n): Collected {\n\tconst [collected, updateCollected] = useCollector(monitor, collect, onCollect)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction subscribeToMonitorStateChange() {\n\t\t\tconst handlerId = monitor.getHandlerId()\n\t\t\tif (handlerId == null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn monitor.subscribeToStateChange(updateCollected, {\n\t\t\t\thandlerIds: [handlerId],\n\t\t\t})\n\t\t},\n\t\t[monitor, updateCollected],\n\t)\n\n\treturn collected\n}\n"],"names":["useIsomorphicLayoutEffect","useCollector","useMonitorOutput","monitor","collect","onCollect","collected","updateCollected","subscribeToMonitorStateChange","handlerId","getHandlerId","subscribeToStateChange","handlerIds"],"mappings":"AACA,MAAM,GAAGA,yBAAyB,QAAQ,CAAgC;AAC1E,MAAM,GAAGC,YAAY,QAAQ,CAAmB;AAEhD,MAAM,UAAUC,gBAAgB,CAC/BC,OAAsC,EACtCC,OAAwC,EACxCC,SAAsB,EACV,CAAC;IACb,KAAK,EAAEC,SAAS,EAAEC,eAAe,IAAIN,YAAY,CAACE,OAAO,EAAEC,OAAO,EAAEC,SAAS;IAE7EL,yBAAyB,CACxB,QAAQ,CAACQ,6BAA6B,GAAG,CAAC;QACzC,KAAK,CAACC,SAAS,GAAGN,OAAO,CAACO,YAAY;QACtC,EAAE,EAAED,SAAS,IAAI,IAAI,EAAE,CAAC;YACvB,MAAM;QACP,CAAC;QACD,MAAM,CAACN,OAAO,CAACQ,sBAAsB,CAACJ,eAAe,EAAE,CAAC;YACvDK,UAAU,EAAE,CAACH;gBAAAA,SAAS;YAAA,CAAC;QACxB,CAAC;IACF,CAAC,EACD,CAACN;QAAAA,OAAO;QAAEI,eAAe;IAAA,CAAC;IAG3B,MAAM,CAACD,SAAS;AACjB,CAAC"}
{"version":3,"sources":["../../src/createDragDropManager.ts"],"sourcesContent":["import { DragDropManagerImpl } from './classes/DragDropManagerImpl.js'\nimport type { DragDropManager, BackendFactory } from './interfaces.js'\nimport { createStore, Store } from 'redux'\nimport { reduce, State } from './reducers/index.js'\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl.js'\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl.js'\n\nexport function createDragDropManager(\n\tbackendFactory: BackendFactory,\n\tglobalContext: unknown = undefined,\n\tbackendOptions: unknown = {},\n\tdebugMode = false,\n): DragDropManager {\n\tconst store = makeStoreInstance(debugMode)\n\tconst monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store))\n\tconst manager = new DragDropManagerImpl(store, monitor)\n\tconst backend = backendFactory(manager, globalContext, backendOptions)\n\tmanager.receiveBackend(backend)\n\treturn manager\n}\n\nfunction makeStoreInstance(debugMode: boolean): Store<State> {\n\t// TODO: if we ever make a react-native version of this,\n\t// we'll need to consider how to pull off dev-tooling\n\tconst reduxDevTools =\n\t\ttypeof window !== 'undefined' &&\n\t\t(window as any).__REDUX_DEVTOOLS_EXTENSION__\n\treturn createStore(\n\t\treduce,\n\t\tdebugMode &&\n\t\t\treduxDevTools &&\n\t\t\treduxDevTools({\n\t\t\t\tname: 'dnd-core',\n\t\t\t\tinstanceId: 'dnd-core',\n\t\t\t}),\n\t)\n}\n"],"names":["DragDropManagerImpl","createStore","reduce","DragDropMonitorImpl","HandlerRegistryImpl","createDragDropManager","backendFactory","globalContext","undefined","backendOptions","debugMode","store","makeStoreInstance","monitor","manager","backend","receiveBackend","reduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","name","instanceId"],"mappings":"AAAA,MAAM,GAAGA,mBAAmB,QAAQ,CAAkC;AAEtE,MAAM,GAAGC,WAAW,QAAe,CAAO;AAC1C,MAAM,GAAGC,MAAM,QAAe,CAAqB;AACnD,MAAM,GAAGC,mBAAmB,QAAQ,CAAkC;AACtE,MAAM,GAAGC,mBAAmB,QAAQ,CAAkC;AAEtE,MAAM,UAAUC,qBAAqB,CACpCC,cAA8B,EAC9BC,aAAsB,GAAGC,SAAS,EAClCC,cAAuB,GAAG,CAAC,CAAC,EAC5BC,SAAS,GAAG,KAAK,EACC,CAAC;IACnB,KAAK,CAACC,KAAK,GAAGC,iBAAiB,CAACF,SAAS;IACzC,KAAK,CAACG,OAAO,GAAG,GAAG,CAACV,mBAAmB,CAACQ,KAAK,EAAE,GAAG,CAACP,mBAAmB,CAACO,KAAK;IAC5E,KAAK,CAACG,OAAO,GAAG,GAAG,CAACd,mBAAmB,CAACW,KAAK,EAAEE,OAAO;IACtD,KAAK,CAACE,OAAO,GAAGT,cAAc,CAACQ,OAAO,EAAEP,aAAa,EAAEE,cAAc;IACrEK,OAAO,CAACE,cAAc,CAACD,OAAO;IAC9B,MAAM,CAACD,OAAO;AACf,CAAC;SAEQF,iBAAiB,CAACF,SAAkB,EAAgB,CAAC;IAC7D,EAAwD,AAAxD,sDAAwD;IACxD,EAAqD,AAArD,mDAAqD;IACrD,KAAK,CAACO,aAAa,GAClB,MAAM,CAACC,MAAM,KAAK,CAAW,cAC5BA,MAAM,CAASC,4BAA4B;IAC7C,MAAM,CAAClB,WAAW,CACjBC,MAAM,EACNQ,SAAS,IACRO,aAAa,IACbA,aAAa,CAAC,CAAC;QACdG,IAAI,EAAE,CAAU;QAChBC,UAAU,EAAE,CAAU;IACvB,CAAC;AAEJ,CAAC"}
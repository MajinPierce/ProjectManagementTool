{"version":3,"sources":["../../../src/reducers/dirtyHandlerIds.ts"],"sourcesContent":["import {\n\tBEGIN_DRAG,\n\tPUBLISH_DRAG_SOURCE,\n\tHOVER,\n\tEND_DRAG,\n\tDROP,\n} from '../actions/dragDrop/index.js'\nimport {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\nimport { areArraysEqual } from '../utils/equality.js'\nimport { NONE, ALL } from '../utils/dirtiness.js'\nimport { xor } from '../utils/js_utils.js'\n\nexport type State = string[]\n\nexport interface DirtyHandlerIdPayload {\n\ttargetIds: string[]\n\tprevTargetIds: string[]\n}\n\nexport function reduce(\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t_state: State = NONE,\n\taction: Action<DirtyHandlerIdPayload>,\n): State {\n\tswitch (action.type) {\n\t\tcase HOVER:\n\t\t\tbreak\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\tcase REMOVE_TARGET:\n\t\tcase REMOVE_SOURCE:\n\t\t\treturn NONE\n\t\tcase BEGIN_DRAG:\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\tdefault:\n\t\t\treturn ALL\n\t}\n\n\tconst { targetIds = [], prevTargetIds = [] } = action.payload\n\tconst result = xor(targetIds, prevTargetIds)\n\tconst didChange =\n\t\tresult.length > 0 || !areArraysEqual(targetIds, prevTargetIds)\n\n\tif (!didChange) {\n\t\treturn NONE\n\t}\n\n\t// Check the target ids at the innermost position. If they are valid, add them\n\t// to the result\n\tconst prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1]\n\tconst innermostTargetId = targetIds[targetIds.length - 1]\n\tif (prevInnermostTargetId !== innermostTargetId) {\n\t\tif (prevInnermostTargetId) {\n\t\t\tresult.push(prevInnermostTargetId)\n\t\t}\n\t\tif (innermostTargetId) {\n\t\t\tresult.push(innermostTargetId)\n\t\t}\n\t}\n\n\treturn result\n}\n"],"names":["BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","END_DRAG","DROP","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","areArraysEqual","NONE","ALL","xor","reduce","_state","action","type","targetIds","prevTargetIds","payload","result","didChange","length","prevInnermostTargetId","innermostTargetId","push"],"mappings":"AAAA,MAAM,GACLA,UAAU,EACVC,mBAAmB,EACnBC,KAAK,EACLC,QAAQ,EACRC,IAAI,QACE,CAA8B;AACrC,MAAM,GACLC,UAAU,EACVC,UAAU,EACVC,aAAa,EACbC,aAAa,QACP,CAAwB;AAE/B,MAAM,GAAGC,cAAc,QAAQ,CAAsB;AACrD,MAAM,GAAGC,IAAI,EAAEC,GAAG,QAAQ,CAAuB;AACjD,MAAM,GAAGC,GAAG,QAAQ,CAAsB;AAS1C,MAAM,UAAUC,MAAM,CACrB,EAA6D,AAA7D,2DAA6D;AAC7DC,MAAa,GAAGJ,IAAI,EACpBK,MAAqC,EAC7B,CAAC;IACT,MAAM,CAAEA,MAAM,CAACC,IAAI;QAClB,IAAI,CAACd,KAAK;YACT,KAAK;QACN,IAAI,CAACG,UAAU;QACf,IAAI,CAACC,UAAU;QACf,IAAI,CAACE,aAAa;QAClB,IAAI,CAACD,aAAa;YACjB,MAAM,CAACG,IAAI;QACZ,IAAI,CAACV,UAAU;QACf,IAAI,CAACC,mBAAmB;QACxB,IAAI,CAACE,QAAQ;QACb,IAAI,CAACC,IAAI;;YAER,MAAM,CAACO,GAAG;;IAGZ,KAAK,CAAC,CAAC,CAACM,SAAS,EAAG,CAAC,CAAC,GAAEC,aAAa,EAAG,CAAC,CAAC,EAAC,CAAC,GAAGH,MAAM,CAACI,OAAO;IAC7D,KAAK,CAACC,MAAM,GAAGR,GAAG,CAACK,SAAS,EAAEC,aAAa;IAC3C,KAAK,CAACG,SAAS,GACdD,MAAM,CAACE,MAAM,GAAG,CAAC,KAAKb,cAAc,CAACQ,SAAS,EAAEC,aAAa;IAE9D,EAAE,GAAGG,SAAS,EAAE,CAAC;QAChB,MAAM,CAACX,IAAI;IACZ,CAAC;IAED,EAA8E,AAA9E,4EAA8E;IAC9E,EAAgB,AAAhB,cAAgB;IAChB,KAAK,CAACa,qBAAqB,GAAGL,aAAa,CAACA,aAAa,CAACI,MAAM,GAAG,CAAC;IACpE,KAAK,CAACE,iBAAiB,GAAGP,SAAS,CAACA,SAAS,CAACK,MAAM,GAAG,CAAC;IACxD,EAAE,EAAEC,qBAAqB,KAAKC,iBAAiB,EAAE,CAAC;QACjD,EAAE,EAAED,qBAAqB,EAAE,CAAC;YAC3BH,MAAM,CAACK,IAAI,CAACF,qBAAqB;QAClC,CAAC;QACD,EAAE,EAAEC,iBAAiB,EAAE,CAAC;YACvBJ,MAAM,CAACK,IAAI,CAACD,iBAAiB;QAC9B,CAAC;IACF,CAAC;IAED,MAAM,CAACJ,MAAM;AACd,CAAC"}
{"version":3,"sources":["../../../src/reducers/dragOperation.ts"],"sourcesContent":["import {\n\tBEGIN_DRAG,\n\tPUBLISH_DRAG_SOURCE,\n\tHOVER,\n\tEND_DRAG,\n\tDROP,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Identifier, Action } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n"],"names":["BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","END_DRAG","DROP","REMOVE_TARGET","without","initialState","itemType","item","sourceId","targetIds","dropResult","didDrop","isSourcePublic","reduce","state","action","payload","type","indexOf","targetId"],"mappings":"AAAA,MAAM,GACLA,UAAU,EACVC,mBAAmB,EACnBC,KAAK,EACLC,QAAQ,EACRC,IAAI,QACE,CAA8B;AACrC,MAAM,GAAGC,aAAa,QAAQ,CAAwB;AAEtD,MAAM,GAAGC,OAAO,QAAQ,CAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAY9C,KAAK,CAACC,YAAY,GAAU,CAAC;IAC5BC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE,CAAC,CAAC;IACbC,UAAU,EAAE,IAAI;IAChBC,OAAO,EAAE,KAAK;IACdC,cAAc,EAAE,IAAI;AACrB,CAAC;AAED,MAAM,UAAUC,MAAM,CACrBC,KAAY,GAAGT,YAAY,EAC3BU,MAQE,EACM,CAAC;IACT,KAAK,CAAC,CAAC,CAACC,OAAO,EAAC,CAAC,GAAGD,MAAM;IAC1B,MAAM,CAAEA,MAAM,CAACE,IAAI;QAClB,IAAI,CAACnB,UAAU;YACd,MAAM,mBACFgB,KAAK;gBACRR,QAAQ,EAAEU,OAAO,CAACV,QAAQ;gBAC1BC,IAAI,EAAES,OAAO,CAACT,IAAI;gBAClBC,QAAQ,EAAEQ,OAAO,CAACR,QAAQ;gBAC1BI,cAAc,EAAEI,OAAO,CAACJ,cAAc;gBACtCF,UAAU,EAAE,IAAI;gBAChBC,OAAO,EAAE,KAAK;;QAEhB,IAAI,CAACZ,mBAAmB;YACvB,MAAM,mBACFe,KAAK;gBACRF,cAAc,EAAE,IAAI;;QAEtB,IAAI,CAACZ,KAAK;YACT,MAAM,mBACFc,KAAK;gBACRL,SAAS,EAAEO,OAAO,CAACP,SAAS;;QAE9B,IAAI,CAACN,aAAa;YACjB,EAAE,EAAEW,KAAK,CAACL,SAAS,CAACS,OAAO,CAACF,OAAO,CAACG,QAAQ,OAAO,CAAC,EAAE,CAAC;gBACtD,MAAM,CAACL,KAAK;YACb,CAAC;YACD,MAAM,mBACFA,KAAK;gBACRL,SAAS,EAAEL,OAAO,CAACU,KAAK,CAACL,SAAS,EAAEO,OAAO,CAACG,QAAQ;;QAEtD,IAAI,CAACjB,IAAI;YACR,MAAM,mBACFY,KAAK;gBACRJ,UAAU,EAAEM,OAAO,CAACN,UAAU;gBAC9BC,OAAO,EAAE,IAAI;gBACbF,SAAS,EAAE,CAAC,CAAC;;QAEf,IAAI,CAACR,QAAQ;YACZ,MAAM,mBACFa,KAAK;gBACRR,QAAQ,EAAE,IAAI;gBACdC,IAAI,EAAE,IAAI;gBACVC,QAAQ,EAAE,IAAI;gBACdE,UAAU,EAAE,IAAI;gBAChBC,OAAO,EAAE,KAAK;gBACdC,cAAc,EAAE,IAAI;gBACpBH,SAAS,EAAE,CAAC,CAAC;;;YAGd,MAAM,CAACK,KAAK;;AAEf,CAAC"}
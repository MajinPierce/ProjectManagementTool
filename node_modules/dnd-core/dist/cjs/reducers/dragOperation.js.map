{"version":3,"sources":["../../../src/reducers/dragOperation.ts"],"sourcesContent":["import {\n\tBEGIN_DRAG,\n\tPUBLISH_DRAG_SOURCE,\n\tHOVER,\n\tEND_DRAG,\n\tDROP,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Identifier, Action } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n"],"names":["reduce","initialState","itemType","item","sourceId","targetIds","dropResult","didDrop","isSourcePublic","state","action","payload","type","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","REMOVE_TARGET","indexOf","targetId","without","DROP","END_DRAG"],"mappings":";;;;QA+BgBA,MAAM,GAANA,MAAM;AAzBf,GAA8B,CAA9B,QAA8B;AACP,GAAwB,CAAxB,WAAwB;AAE9B,GAAsB,CAAtB,UAAsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAY9C,KAAK,CAACC,YAAY,GAAU,CAAC;IAC5BC,QAAQ,EAAE,IAAI;IACdC,IAAI,EAAE,IAAI;IACVC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE,CAAC,CAAC;IACbC,UAAU,EAAE,IAAI;IAChBC,OAAO,EAAE,KAAK;IACdC,cAAc,EAAE,IAAI;AACrB,CAAC;SAEeR,MAAM,CACrBS,KAAY,GAAGR,YAAY,EAC3BS,MAQE,EACM,CAAC;IACT,KAAK,CAAC,CAAC,CAACC,OAAO,EAAC,CAAC,GAAGD,MAAM;IAC1B,MAAM,CAAEA,MAAM,CAACE,IAAI;QAClB,IAAI,CAACC,QAAU;YACd,MAAM,mBACFJ,KAAK;gBACRP,QAAQ,EAAES,OAAO,CAACT,QAAQ;gBAC1BC,IAAI,EAAEQ,OAAO,CAACR,IAAI;gBAClBC,QAAQ,EAAEO,OAAO,CAACP,QAAQ;gBAC1BI,cAAc,EAAEG,OAAO,CAACH,cAAc;gBACtCF,UAAU,EAAE,IAAI;gBAChBC,OAAO,EAAE,KAAK;;QAEhB,IAAI,CAACO,QAAmB;YACvB,MAAM,mBACFL,KAAK;gBACRD,cAAc,EAAE,IAAI;;QAEtB,IAAI,CAACO,QAAK;YACT,MAAM,mBACFN,KAAK;gBACRJ,SAAS,EAAEM,OAAO,CAACN,SAAS;;QAE9B,IAAI,CAACW,WAAa;YACjB,EAAE,EAAEP,KAAK,CAACJ,SAAS,CAACY,OAAO,CAACN,OAAO,CAACO,QAAQ,OAAO,CAAC,EAAE,CAAC;gBACtD,MAAM,CAACT,KAAK;YACb,CAAC;YACD,MAAM,mBACFA,KAAK;gBACRJ,SAAS,MAAEc,UAAO,UAACV,KAAK,CAACJ,SAAS,EAAEM,OAAO,CAACO,QAAQ;;QAEtD,IAAI,CAACE,QAAI;YACR,MAAM,mBACFX,KAAK;gBACRH,UAAU,EAAEK,OAAO,CAACL,UAAU;gBAC9BC,OAAO,EAAE,IAAI;gBACbF,SAAS,EAAE,CAAC,CAAC;;QAEf,IAAI,CAACgB,QAAQ;YACZ,MAAM,mBACFZ,KAAK;gBACRP,QAAQ,EAAE,IAAI;gBACdC,IAAI,EAAE,IAAI;gBACVC,QAAQ,EAAE,IAAI;gBACdE,UAAU,EAAE,IAAI;gBAChBC,OAAO,EAAE,KAAK;gBACdC,cAAc,EAAE,IAAI;gBACpBH,SAAS,EAAE,CAAC,CAAC;;;YAGd,MAAM,CAACI,KAAK;;AAEf,CAAC"}